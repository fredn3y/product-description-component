class ProductDescription extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this._content={},this._error=null,this._theme="default",this.render()}static get observedAttributes(){return["title","description","features","image-url","theme","price","currency"]}attributeChangedCallback(name,oldValue,newValue){oldValue!==newValue&&("theme"===name?this._theme=newValue:this._content[name]=newValue,this.render())}generateSchema(){const schema={context:"https://schema.org",type:"Product",name:this._content.title,description:this._content.description,image:this._content["image-url"]};if(this._content.features)try{const features=JSON.parse(this._content.features);features.length>0&&(schema.additionalProperty=features.map(feature=>({type:"PropertyValue",name:feature})))}catch(e){console.warn("Invalid features format")}return this._content.price&&(schema.offers={type:"Offer",price:this._content.price,priceCurrency:this._content.currency||"USD"}),JSON.stringify(schema)}generateFallbackContent(){try{const features=this._content.features?JSON.parse(this._content.features):[];return`<div class="product-seo-content"><h2>${this._content.title||""}</h2><p>${this._content.description||""}</p>${features.length>0?`<ul>${features.map(feature=>`<li>${feature}</li>`).join("")}</ul>`:""} ${this._content["image-url"]?`<img src="${this._content["image-url"]}" alt="${this._content.title||"Product image"}" width="800" height="600" loading="lazy"/>`:""}</div>`}catch(e){return""}}getThemeStyles(){const themes={default:".product-container{background:white;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,0.1);overflow:hidden}.product-title{font-size:24px;font-weight:600;color:#1a1a1a}.product-description{color:#4a4a4a}.features-list li{color:#4a4a4a}",modern:".product-container{background:linear-gradient(145deg,#fff,#f5f5f5);border-radius:16px;box-shadow:20px 20px 60px #d9d9d9,-20px -20px 60px #fff;overflow:hidden}.product-title{font-size:28px;font-weight:700;color:#2d3748;letter-spacing:-.5px}.product-description{color:#4a5568;font-size:17px}.features-list li{color:#4a5568;position:relative;padding-left:24px}.features-list li::before{content:'â†’';position:absolute;left:0;color:#4299e1}",minimal:".product-container{background:none;border:1px solid #e2e8f0;border-radius:0;overflow:hidden}.product-title{font-size:24px;font-weight:500;color:#000;border-bottom:2px solid #000;padding-bottom:8px;margin-bottom:24px}.product-description{color:#2d3748;font-size:16px;line-height:1.8}.features-list{list-style-type:none;padding:0}.features-list li{color:#2d3748;padding:8px 0;border-bottom:1px solid #e2e8f0}",dark:".product-container{background:#1a202c;border-radius:12px;box-shadow:0 4px 6px rgba(0,0,0,0.2);overflow:hidden}.product-title{font-size:26px;font-weight:600;color:#fff}.product-description{color:#cbd5e0}.features-list li{color:#cbd5e0}.features-list li::marker{color:#4299e1}",elegant:".product-container{background:#fff;border:1px solid #e2e8f0;border-radius:0;box-shadow:0 20px 25px -5px rgba(0,0,0,0.1);overflow:hidden;position:relative}.product-container::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#667eea,#764ba2)}.product-title{font-size:28px;font-weight:600;color:#1a202c;font-family:'Georgia',serif}.product-description{color:#4a5568;font-size:16px;line-height:1.8;font-family:'Georgia',serif}.features-list li{color:#4a5568;padding:4px 0;font-family:'Georgia',serif}"};return themes[this._theme]||themes.default}render(){const styles=`:host{display:block;font-family:system-ui,-apple-system,sans-serif;max-width:800px;margin:0 auto;padding:20px;box-sizing:border-box}.product-seo-content{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.product-image{width:100%;height:auto;max-height:400px;object-fit:cover;display:block}.product-content{padding:20px}.product-title{margin:0 0 16px 0}.product-description{font-size:16px;line-height:1.6;margin:0 0 20px 0}.features-list{margin:0;padding:0 0 0 20px;list-style-position:outside}.features-list li{margin:8px 0}.error-message{color:#dc2626;padding:10px;background:#fee2e2;border-radius:4px;margin:10px 0}${this.getThemeStyles()}`;try{const features=this._content.features?JSON.parse(this._content.features):[];const schemaScript=document.createElement("script");schemaScript.type="application/ld+json",schemaScript.textContent=this.generateSchema(),document.head.appendChild(schemaScript),this.shadowRoot.innerHTML=`<style>${styles}</style>${this.generateFallbackContent()}<article class="product-container" itemscope itemtype="https://schema.org/Product">${this._error?`<div class="error-message">${this._error}</div>`:""}${this._content["image-url"]?`<img class="product-image" src="${this._content["image-url"]}" alt="${this._content.title||"Product image"}" loading="lazy" itemprop="image">`:""}
<div class="product-content">${this._content.title?`<h2 class="product-title" itemprop="name">${this._content.title}</h2>`:""}${this._content.description?`<p class="product-description" itemprop="description">${this._content.description}</p>`:""}${features.length>0?`<ul class="features-list">${features.map(feature=>`<li itemprop="additionalProperty" itemscope itemtype="https://schema.org/PropertyValue"><span itemprop="name">${feature}</span></li>`).join("")}</ul>`:""}</div></article>`}catch(error){this._error="Error rendering product description: "+error.message,this.shadowRoot.innerHTML=`<style>${styles}</style><div class="error-message">${this._error}</div>`}}}customElements.define("product-description",ProductDescription); 